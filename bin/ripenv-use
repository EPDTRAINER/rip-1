#!/usr/bin/env ruby
# Usage: ripenv-use RIPENV
#
# Use RIPENV for the remainder of this shell session

$LOAD_PATH.unshift File.dirname(__FILE__) + "/../lib"
require 'rip/script'

target = ARGV[0]

if ENV['RIPENV']
  abort "You have $RIPENV set. Please unset it or change it manually."
end

exit if target == RIPENV

if RIPENVS.include? target
  rm "#{RIPDIR}/active"
  ln_s "#{RIPDIR}/#{target}", "#{RIPDIR}/active"
else
  abort "Can't find ripenv `#{target}'"
end
